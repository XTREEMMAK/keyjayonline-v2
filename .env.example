# KeyJay Online v2 - Environment Configuration
# Copy this file to .env and configure the values for your environment

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL database connection details
DATABASE_HOST=192.168.10.156
DATABASE_PORT=5432
DATABASE_NAME=kjo_v2_db
DATABASE_USER=your_db_username
DATABASE_PASSWORD=your_db_password

# =============================================================================
# CDN AND ASSET CONFIGURATION  
# =============================================================================

# DigitalOcean Spaces CDN URLs
CDN_BASE_URL=https://kjo.nyc3.cdn.digitaloceanspaces.com
S3_BUCKET_URL=https://kjo.nyc3.digitaloceanspaces.com

# =============================================================================
# DIRECTUS CMS CONFIGURATION
# =============================================================================

# Directus instance URL and authentication token
DIRECTUS_URL=http://192.168.10.24:8057
DIRECTUS_TOKEN=your_directus_admin_token

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Environment mode (development/production)
NODE_ENV=development

# Set to 'true' to use CDN for assets even in development
USE_CDN_FOR_ASSETS=true

# Audio CORS bypass for development (DEVELOPMENT ONLY)
# Set to 'false' to disable CORS bypass or remove entirely for production
BYPASS_CORS_IN_DEV=true

# =============================================================================
# SITE CONFIGURATION
# =============================================================================

# Public-facing site URLs and contact information
PUBLIC_SITE_URL=https://keyjayonline.com
PUBLIC_CONTACT_EMAIL=contact@keyjayonline.com
PUBLIC_HELLO_EMAIL=hello@keyjayonline.com

# =============================================================================
# WEBHOOK CONFIGURATION
# =============================================================================

# Primary webhook URL for contact form submissions (required for production)
# This should point to your n8n webhook endpoint or other processing service
# Example: https://your-n8n-instance.com/webhook/contact-form
CONTACT_FORM_WEBHOOK_URL=

# Webhook authentication secret (highly recommended for production)
# Generate a secure random string for webhook authentication
# This will be sent as both Authorization Bearer token and used for HMAC signatures
# Example: openssl rand -base64 32
CONTACT_FORM_WEBHOOK_SECRET=

# =============================================================================
# RATE LIMITING CONFIGURATION (Optional)
# =============================================================================

# Rate limit window in milliseconds (default: 900000 = 15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Maximum requests per window per IP (default: 5)
RATE_LIMIT_MAX_REQUESTS=5

# =============================================================================
# FORM SECURITY CONFIGURATION (Optional)
# =============================================================================

# Minimum time in milliseconds users must spend filling form (default: 3000 = 3 seconds)
# This helps prevent bot submissions that fill forms too quickly
FORM_MIN_FILL_TIME=3000

# Maximum time in milliseconds before form session expires (default: 1800000 = 30 minutes)
# Forms older than this will be rejected
FORM_MAX_SESSION_TIME=1800000

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================

# Set to true to enable detailed console logging for webhook simulation
# This is automatically detected from NODE_ENV but can be overridden
# DEV_MODE=true

# Development webhook URL for testing (optional)
# Use tools like webhook.site, ngrok, or local n8n instance for testing
# DEV_WEBHOOK_URL=https://webhook.site/your-unique-url

# =============================================================================
# PRODUCTION NOTES
# =============================================================================

# For production deployment:
# 1. Set CONTACT_FORM_WEBHOOK_URL to your actual n8n webhook endpoint
# 2. Generate and set a secure CONTACT_FORM_WEBHOOK_SECRET
# 3. Ensure your webhook endpoint validates the signature
# 4. Consider implementing additional rate limiting at reverse proxy level
# 5. Monitor webhook delivery success rates and implement alerting

# For n8n webhook setup:
# 1. Create a new workflow in n8n
# 2. Add a "Webhook" trigger node
# 3. Set the webhook path (e.g., /webhook/contact-form)
# 4. Configure authentication in n8n to validate the Bearer token
# 5. Add nodes to process the form data (email, database, notifications, etc.)
# 6. Test the webhook URL before deploying

# =============================================================================
# AUDIO CORS BYPASS SYSTEM (DEVELOPMENT)
# =============================================================================

# The BYPASS_CORS_IN_DEV feature enables automatic CORS bypass for audio files
# during development. This system:
# - Automatically transforms CDN URLs to localhost proxy URLs
# - Only active in development mode (NODE_ENV=development)
# - Automatically disabled in production builds
# - Provides seamless audio playback in development environment
# 
# Technical details:
# - See docs/AUDIO_CORS_BYPASS.md for complete technical documentation
# - See docs/DEVELOPMENT.md for setup and usage instructions
# - See docs/DEPLOYMENT.md for production deployment considerations

# =============================================================================
# QUICK SETUP GUIDE
# =============================================================================

# 1. Copy this file: cp .env.example .env
# 2. Update database credentials above
# 3. Update Directus URL and token above
# 4. Start development server: npm run dev
# 5. Visit http://localhost:5173

# For detailed setup instructions, see docs/DEVELOPMENT.md